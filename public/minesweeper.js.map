{"version":3,"sources":["webpack:///minesweeper.js","webpack:///webpack/bootstrap 93483f4cef258dee9f2b","webpack:///./Main.js","webpack:///./Game.js","webpack:///./Field.js","webpack:///./Polyfills.js","webpack:///./Notification.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_Game","_Game2","element","document","getElementById","_classCallCheck","instance","Constructor","TypeError","calculateNumberOfMines","size","MINES_CONFIGURATION","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_Field","_Field2","_Notification","_Notification2","MAX_FIELD_HEIGHT",9,16,30,"Minesweeper","options","this","_el","startGame","bind","finishGame","_levelSelector","querySelector","addEventListener","_refreshBtn","_fieldPlace","_clear","level","parseInt","selectedIndex","showEl","_field","width","height","Math","min","numberOfMines","hideEl","event","detail","type","_gameOverNotification","text","place","anchor","position","additionalStyleClass","show","positionAt","_victoryNotification","hide","clear","get","_state","el","classList","remove","add","_interopRequireWildcard","newObj","hasOwnProperty","_Polyfills","polyfills","installMatches","installClosest","installCustomEvent","Field","_width","_height","_numberOfMines","_flags","PLAYING","_simultaneousClick","cell","leftButtonDown","rightButtonDown","_renderField","_minesLeft","_placeMines","_placeNumbers","_openCell","_setFlag","_onMouseDown","_onMouseUp","removeChild","y","x","neighbours","max","j","push","rows","cells","td","closest","state","END_OF_GAME","dataset","parentNode","rowIndex","cellIndex","_isAnyMineHere","_endOfGame","_showOpenedCell","info","_openEmptyFieldAroundCell","_doesPlayerWin","preventDefault","tdType","_toggleFlag","_showMinesLeft","which","sameCell","_openNeighbours","_deselectCells","fieldHtml","insertAdjacentHTML","round","random","count","_mineCounter","cellNeighbours","typeOfEnd","_showMines","CustomEvent","dispatchEvent","_this","innerHTML","_selectCells","countFlagsAroundCell","_flagCounter","forEach","_this2","isMine","isOpened","victory","isClosed","selectedCells","querySelectorAll","flags","reduce","toggle","filter","Element","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","css","node","parentElement","e","window","params","evt","bubbles","cancelable","undefined","createEvent","initCustomEvent","create","Event","TOP_OFFSET_FOR_NOTIFICATION","RIGHT_OFFSET_FOR_NOTIFICATION","Notification","createElement","className","oncontextmenu","preventContextMenu","parent","body","appendChild","top","left","style","box","getBoundingClientRect","offsetHeight","offsetWidth","right"],"mappings":"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","file":"minesweeper.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"../public/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Game = __webpack_require__(1);\n\t\n\tvar _Game2 = _interopRequireDefault(_Game);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _Game2.default({\n\t    element: document.getElementById('container')\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Field = __webpack_require__(2);\n\t\n\tvar _Field2 = _interopRequireDefault(_Field);\n\t\n\tvar _Notification = __webpack_require__(4);\n\t\n\tvar _Notification2 = _interopRequireDefault(_Notification);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar MAX_FIELD_HEIGHT = 16; // according to MS Windows\n\tvar MINES_CONFIGURATION = {\n\t    9: 10,\n\t    16: 40,\n\t    30: 99\n\t};\n\t\n\tfunction calculateNumberOfMines(size) {\n\t    return MINES_CONFIGURATION[size];\n\t}\n\t\n\tvar Minesweeper = function () {\n\t    function Minesweeper(options) {\n\t        _classCallCheck(this, Minesweeper);\n\t\n\t        this._el = options.element;\n\t\n\t        this.startGame = this.startGame.bind(this);\n\t        this.finishGame = this.finishGame.bind(this);\n\t\n\t        this._levelSelector = this._el.querySelector('[data-selector=\"levelSelector\"]');\n\t        this._levelSelector.addEventListener('change', this.startGame);\n\t\n\t        this._refreshBtn = this._el.querySelector('[data-selector=\"refreshBtn\"]');\n\t        this._refreshBtn.addEventListener('click', this.startGame);\n\t\n\t        this._fieldPlace = this._el.querySelector('[data-component=\"fieldPlace\"]');\n\t        this._fieldPlace.addEventListener('endOfGame', this.finishGame);\n\t    }\n\t\n\t    _createClass(Minesweeper, [{\n\t        key: 'startGame',\n\t        value: function startGame() {\n\t            this._clear();\n\t\n\t            var level = parseInt(this._levelSelector.options[this._levelSelector.selectedIndex].value);\n\t\n\t            if (level) {\n\t                Minesweeper.showEl(this._refreshBtn);\n\t                Minesweeper.showEl(this._fieldPlace);\n\t\n\t                this._field = new _Field2.default({\n\t                    element: this._fieldPlace,\n\t                    width: level,\n\t                    height: Math.min(level, MAX_FIELD_HEIGHT),\n\t                    numberOfMines: calculateNumberOfMines(level)\n\t                });\n\t            } else {\n\t                Minesweeper.hideEl(this._fieldPlace);\n\t                Minesweeper.hideEl(this._refreshBtn);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'finishGame',\n\t        value: function finishGame(event) {\n\t            switch (event.detail.type) {\n\t\n\t                case 'gameOver':\n\t                    {\n\t                        if (!this._gameOverNotification) {\n\t                            this._gameOverNotification = new _Notification2.default({\n\t                                text: 'Game Over!!!',\n\t                                place: this._el,\n\t                                anchor: this._el.querySelector('[data-selector=\"field\"]'),\n\t                                position: 'center',\n\t                                additionalStyleClass: 'gameOver'\n\t                            });\n\t                        }\n\t                        this._gameOverNotification.show();\n\t\n\t                        this._gameOverNotification.positionAt({\n\t                            anchor: this._fieldPlace,\n\t                            position: 'center'\n\t                        });\n\t                        break;\n\t                    }\n\t\n\t                case 'victory':\n\t                    {\n\t                        if (!this._victoryNotification) {\n\t                            this._victoryNotification = new _Notification2.default({\n\t                                text: 'Victory!!!',\n\t                                place: this._el,\n\t                                anchor: this._fieldPlace,\n\t                                position: 'center',\n\t                                additionalStyleClass: 'victory'\n\t                            });\n\t                        }\n\t                        this._victoryNotification.show();\n\t\n\t                        this._victoryNotification.positionAt({\n\t                            anchor: this._fieldPlace,\n\t                            position: 'center'\n\t                        });\n\t                        break;\n\t                    }\n\t            }\n\t        }\n\t    }, {\n\t        key: '_clear',\n\t        value: function _clear() {\n\t            if (this._gameOverNotification) {\n\t                this._gameOverNotification.hide();\n\t            }\n\t\n\t            if (this._victoryNotification) {\n\t                this._victoryNotification.hide();\n\t            }\n\t\n\t            if (this._field) {\n\t                this._field.clear();\n\t                this._field = null;\n\t            }\n\t        }\n\t    }, {\n\t        key: 'state',\n\t        get: function get() {\n\t            return this._state;\n\t        }\n\t    }], [{\n\t        key: 'showEl',\n\t        value: function showEl(el) {\n\t            el.classList.remove('js-hidden');\n\t        }\n\t    }, {\n\t        key: 'hideEl',\n\t        value: function hideEl(el) {\n\t            el.classList.add('js-hidden');\n\t        }\n\t    }]);\n\t\n\t    return Minesweeper;\n\t}();\n\n\texports.default = Minesweeper;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Polyfills = __webpack_require__(3);\n\t\n\tvar polyfills = _interopRequireWildcard(_Polyfills);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tpolyfills.installMatches(); //cross browser polyfill for 'matches' (does not supported by IE)\n\tpolyfills.installClosest(); //cross browser polyfill for 'closest' (does not supported by IE)\n\tpolyfills.installCustomEvent(); //cross browser polyfill for 'custom events' (does not supported by IE)\n\t\n\tvar Field = function () {\n\t    function Field(options) {\n\t        _classCallCheck(this, Field);\n\t\n\t        this._el = options.element;\n\t        this._width = options.width;\n\t        this._height = options.height;\n\t        this._numberOfMines = options.numberOfMines;\n\t        this._flags = 0;\n\t\n\t        this._state = Field.PLAYING;\n\t\n\t        this._simultaneousClick = {\n\t            cell: null,\n\t            leftButtonDown: false,\n\t            rightButtonDown: false\n\t        };\n\t\n\t        this._renderField();\n\t        this._field = this._el.querySelector('[data-selector=\"field\"]');\n\t        this._minesLeft = this._el.querySelector('[data-selector=\"minesIndicator\"]');\n\t\n\t        this._placeMines();\n\t        this._placeNumbers();\n\t\n\t        this._openCell = this._openCell.bind(this);\n\t        this._field.addEventListener('click', this._openCell);\n\t\n\t        this._setFlag = this._setFlag.bind(this);\n\t        this._field.addEventListener('contextmenu', this._setFlag);\n\t\n\t        this._onMouseDown = this._onMouseDown.bind(this);\n\t        this._field.addEventListener('mousedown', this._onMouseDown);\n\t\n\t        this._onMouseUp = this._onMouseUp.bind(this);\n\t        this._field.addEventListener('mouseup', this._onMouseUp);\n\t    }\n\t    //------------ static constants describing state of a game-------------\n\t\n\t\n\t    _createClass(Field, [{\n\t        key: 'clear',\n\t\n\t\n\t        //----------------public methods--------------------\n\t        value: function clear() {\n\t            this._el.removeChild(this._field);\n\t            this._field = null;\n\t        }\n\t    }, {\n\t        key: 'cellNeighbours',\n\t        value: function cellNeighbours(y, x) {\n\t            var neighbours = [];\n\t\n\t            for (var i = Math.max(y - 1, 0); i <= Math.min(y + 1, this.height - 1); i++) {\n\t                for (var j = Math.max(x - 1, 0); j <= Math.min(x + 1, this.width - 1); j++) {\n\t                    if (!(i === y && j === x)) {\n\t                        neighbours.push(this._field.rows[i].cells[j]);\n\t                    }\n\t                }\n\t            }\n\t\n\t            return neighbours;\n\t        }\n\t\n\t        //-----------------event handlers----------------\n\t\n\t    }, {\n\t        key: '_openCell',\n\t        value: function _openCell(event) {\n\t            var td = event.target.closest('td');\n\t\n\t            if (this.state === Field.END_OF_GAME || !td || td.dataset.type !== 'covered') {\n\t                return;\n\t            }\n\t\n\t            var y = td.parentNode.rowIndex;\n\t            var x = td.cellIndex;\n\t\n\t            if (Field._isAnyMineHere(td)) {\n\t                this._endOfGame('gameOver');\n\t            } else {\n\t                td.dataset.type = 'opened';\n\t                Field._showOpenedCell(td);\n\t\n\t                if (td.dataset.info === '') {\n\t                    this._openEmptyFieldAroundCell(y, x);\n\t                }\n\t\n\t                if (this._doesPlayerWin()) {\n\t                    this._endOfGame('victory');\n\t                }\n\t            }\n\t        }\n\t    }, {\n\t        key: '_setFlag',\n\t        value: function _setFlag(event) {\n\t            event.preventDefault();\n\t\n\t            var td = event.target.closest('td');\n\t\n\t            if (this.state === Field.END_OF_GAME || !td) {\n\t                return;\n\t            }\n\t\n\t            var tdType = td.dataset.type;\n\t\n\t            switch (tdType) {\n\t                case 'covered':\n\t                    {\n\t                        td.dataset.type = 'marked';\n\t                        this._flags++;\n\t                        break;\n\t                    }\n\t                case 'marked':\n\t                    {\n\t                        td.dataset.type = 'covered';\n\t                        this._flags--;\n\t                        break;\n\t                    }\n\t                default:\n\t                    {\n\t                        return;\n\t                    }\n\t            }\n\t\n\t            Field._toggleFlag(td);\n\t            this._showMinesLeft();\n\t        }\n\t    }, {\n\t        key: '_onMouseDown',\n\t        value: function _onMouseDown(event) {\n\t            event.preventDefault();\n\t\n\t            var td = event.target.closest('td');\n\t\n\t            if (this.state === Field.END_OF_GAME || !td) {\n\t                return;\n\t            }\n\t\n\t            switch (event.which) {\n\t                case 1:\n\t                    {\n\t                        this._simultaneousClick.leftButtonDown = true;\n\t                        break;\n\t                    }\n\t                case 3:\n\t                    {\n\t                        this._simultaneousClick.rightButtonDown = true;\n\t                        break;\n\t                    }\n\t                default:\n\t                    {\n\t                        return;\n\t                    }\n\t            }\n\t\n\t            if (this._simultaneousClick.cell) {\n\t                var sameCell = this._simultaneousClick.cell === td;\n\t                var leftButtonDown = this._simultaneousClick.leftButtonDown;\n\t                var rightButtonDown = this._simultaneousClick.rightButtonDown;\n\t\n\t                if (sameCell && leftButtonDown && rightButtonDown) {\n\t                    this._openNeighbours(td);\n\t                } else {\n\t                    this._simultaneousClick.leftButtonDown = false;\n\t                    this._simultaneousClick.rightButtonDown = false;\n\t                    this._simultaneousClick.cell = null;\n\t                }\n\t            } else {\n\t                this._simultaneousClick.cell = td;\n\t            }\n\t        }\n\t    }, {\n\t        key: '_onMouseUp',\n\t        value: function _onMouseUp(event) {\n\t            event.preventDefault();\n\t\n\t            switch (event.which) {\n\t                case 1:\n\t                    {\n\t                        this._simultaneousClick.leftButtonDown = false;\n\t                        break;\n\t                    }\n\t                case 3:\n\t                    {\n\t                        this._simultaneousClick.rightButtonDown = false;\n\t                        break;\n\t                    }\n\t            }\n\t\n\t            this._deselectCells();\n\t\n\t            this._simultaneousClick.cell = null;\n\t        }\n\t\n\t        //--------------main private methods-----------\n\t\n\t    }, {\n\t        key: '_renderField',\n\t        value: function _renderField() {\n\t            var fieldHtml = '<table data-selector=\"field\">';\n\t\n\t            for (var i = 0; i < this.height; i++) {\n\t                fieldHtml += '<tr>\\n';\n\t                for (var j = 0; j < this.width; j++) {\n\t                    fieldHtml += '<td class=\"covered\" data-type=\"covered\"></td>\\n';\n\t                }\n\t                fieldHtml += '</tr>';\n\t            }\n\t\n\t            fieldHtml += '</table>';\n\t\n\t            this._el.insertAdjacentHTML('beforeEnd', fieldHtml);\n\t        }\n\t    }, {\n\t        key: '_placeMines',\n\t        value: function _placeMines() {\n\t            for (var i = 1; i <= this.numberOfMines;) {\n\t                var y = Math.round(Math.random() * (this.height - 1));\n\t                var x = Math.round(Math.random() * (this.width - 1));\n\t                var td = this._field.rows[y].cells[x];\n\t\n\t                if (!Field._isAnyMineHere(td)) {\n\t                    td.dataset.info = 'M';\n\t                    i++;\n\t                }\n\t            }\n\t\n\t            this._showMinesLeft();\n\t        }\n\t    }, {\n\t        key: '_placeNumbers',\n\t        value: function _placeNumbers() {\n\t            for (var i = 0; i < this.height; i++) {\n\t                for (var j = 0; j < this.width; j++) {\n\t                    var td = this._field.rows[i].cells[j];\n\t                    if (!Field._isAnyMineHere(td)) {\n\t                        var count = Field._mineCounter(this.cellNeighbours(i, j));\n\t                        td.dataset.info = count || '';\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    }, {\n\t        key: '_endOfGame',\n\t        value: function _endOfGame(typeOfEnd) {\n\t            this._state = Field.END_OF_GAME;\n\t\n\t            if (typeOfEnd === 'gameOver') {\n\t                this._showMines();\n\t            }\n\t\n\t            var event = new CustomEvent(\"endOfGame\", {\n\t                detail: { type: typeOfEnd }\n\t            });\n\t\n\t            this._el.dispatchEvent(event);\n\t        }\n\t\n\t        //------------------ different subordinate private methods---------------\n\t\n\t    }, {\n\t        key: '_openNeighbours',\n\t        value: function _openNeighbours(cell) {\n\t            var _this = this;\n\t\n\t            if (!cell.innerHTML) {\n\t                return;\n\t            }\n\t            var y = cell.parentNode.rowIndex;\n\t            var x = cell.cellIndex;\n\t\n\t            var neighbours = this.cellNeighbours(y, x);\n\t\n\t            Field._selectCells(neighbours);\n\t\n\t            var countFlagsAroundCell = Field._flagCounter(neighbours);\n\t\n\t            if (parseInt(cell.dataset.info) === countFlagsAroundCell) {\n\t                neighbours.forEach(function (td) {\n\t                    var event = {\n\t                        target: td\n\t                    };\n\t                    _this._openCell(event);\n\t                });\n\t            }\n\t        }\n\t    }, {\n\t        key: '_openEmptyFieldAroundCell',\n\t        value: function _openEmptyFieldAroundCell(y, x) {\n\t            var _this2 = this;\n\t\n\t            this.cellNeighbours(y, x).forEach(function (td) {\n\t                var isMine = Field._isAnyMineHere(td);\n\t                var isOpened = td.dataset.type === 'opened';\n\t\n\t                if (!(isMine || isOpened)) {\n\t                    var event = {\n\t                        target: td\n\t                    };\n\t                    _this2._openCell(event);\n\t                }\n\t            });\n\t        }\n\t    }, {\n\t        key: '_doesPlayerWin',\n\t        value: function _doesPlayerWin() {\n\t            var victory = true;\n\t\n\t            for (var i = 0; i < this.height; i++) {\n\t                for (var j = 0; j < this.width; j++) {\n\t                    var td = this._field.rows[i].cells[j];\n\t\n\t                    var isMine = Field._isAnyMineHere(td);\n\t                    var isClosed = td.dataset.type === 'covered' || td.dataset.type === 'marked';\n\t                    if (isClosed && !isMine) {\n\t                        victory = false;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t\n\t            return victory;\n\t        }\n\t\n\t        //---------different non-logical private methods changing styles-------------\n\t\n\t    }, {\n\t        key: '_deselectCells',\n\t        value: function _deselectCells() {\n\t            var selectedCells = this._field.querySelectorAll('.selected');\n\t\n\t            [].forEach.call(selectedCells, function (td) {\n\t                td.classList.remove('selected');\n\t            });\n\t        }\n\t    }, {\n\t        key: '_showMines',\n\t        value: function _showMines() {\n\t            for (var i = 0; i < this.height; i++) {\n\t                for (var j = 0; j < this.width; j++) {\n\t                    var td = this._field.rows[i].cells[j];\n\t\n\t                    if (Field._isAnyMineHere(td)) {\n\t                        td.classList.remove('covered');\n\t                        td.classList.add('exploded');\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    }, {\n\t        key: '_showMinesLeft',\n\t        value: function _showMinesLeft() {\n\t            this._minesLeft.innerHTML = this.numberOfMines - this.flags;\n\t        }\n\t    }, {\n\t        key: 'width',\n\t\n\t\n\t        //-----------get methods---------------\n\t        get: function get() {\n\t            return this._width;\n\t        }\n\t    }, {\n\t        key: 'height',\n\t        get: function get() {\n\t            return this._height;\n\t        }\n\t    }, {\n\t        key: 'numberOfMines',\n\t        get: function get() {\n\t            return this._numberOfMines;\n\t        }\n\t    }, {\n\t        key: 'flags',\n\t        get: function get() {\n\t            return this._flags;\n\t        }\n\t    }, {\n\t        key: 'state',\n\t        get: function get() {\n\t            return this._state;\n\t        }\n\t    }], [{\n\t        key: '_isAnyMineHere',\n\t        value: function _isAnyMineHere(cell) {\n\t            return cell.dataset.info === 'M';\n\t        }\n\t    }, {\n\t        key: '_mineCounter',\n\t        value: function _mineCounter(cells) {\n\t            return cells.reduce(function (count, cell) {\n\t                if (Field._isAnyMineHere(cell)) {\n\t                    count++;\n\t                }\n\t\n\t                return count;\n\t            }, 0);\n\t        }\n\t    }, {\n\t        key: '_flagCounter',\n\t        value: function _flagCounter(cells) {\n\t            return cells.reduce(function (count, cell) {\n\t                if (cell.dataset.type === 'marked') {\n\t                    count++;\n\t                }\n\t\n\t                return count;\n\t            }, 0);\n\t        }\n\t    }, {\n\t        key: '_showOpenedCell',\n\t        value: function _showOpenedCell(cell) {\n\t            cell.classList.remove('covered');\n\t            cell.innerHTML = cell.dataset.info;\n\t        }\n\t    }, {\n\t        key: '_toggleFlag',\n\t        value: function _toggleFlag(cell) {\n\t            cell.classList.toggle('marked');\n\t        }\n\t    }, {\n\t        key: '_selectCells',\n\t        value: function _selectCells(cells) {\n\t            cells.filter(function (td) {\n\t                return td.dataset.type === 'covered';\n\t            }).forEach(function (td) {\n\t                return td.classList.add('selected');\n\t            });\n\t        }\n\t    }, {\n\t        key: 'PLAYING',\n\t        get: function get() {\n\t            return 0;\n\t        }\n\t    }, {\n\t        key: 'END_OF_GAME',\n\t        get: function get() {\n\t            return 1;\n\t        }\n\t    }]);\n\t\n\t    return Field;\n\t}();\n\n\texports.default = Field;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.installMatches = installMatches;\n\texports.installClosest = installClosest;\n\texports.installCustomEvent = installCustomEvent;\n\tfunction installMatches() {\n\t\n\t    // проверяем поддержку\n\t    if (!Element.prototype.matches) {\n\t\n\t        // определяем свойство\n\t        Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector;\n\t    }\n\t}\n\t\n\tfunction installClosest() {\n\t\n\t    // проверяем поддержку\n\t    if (!Element.prototype.closest) {\n\t\n\t        // реализуем\n\t        Element.prototype.closest = function (css) {\n\t            var node = this;\n\t\n\t            while (node) {\n\t                if (node.matches(css)) return node;else node = node.parentElement;\n\t            }\n\t            return null;\n\t        };\n\t    }\n\t}\n\t\n\tfunction installCustomEvent() {\n\t    try {\n\t        new CustomEvent(\"IE has CustomEvent, but doesn't support constructor\");\n\t    } catch (e) {\n\t\n\t        window.CustomEvent = function (event, params) {\n\t            var evt;\n\t            params = params || {\n\t                bubbles: false,\n\t                cancelable: false,\n\t                detail: undefined\n\t            };\n\t            evt = document.createEvent(\"CustomEvent\");\n\t            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t            return evt;\n\t        };\n\t\n\t        CustomEvent.prototype = Object.create(window.Event.prototype);\n\t    }\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TOP_OFFSET_FOR_NOTIFICATION = 10;\n\tvar RIGHT_OFFSET_FOR_NOTIFICATION = 10;\n\t\n\tvar Notification = function () {\n\t    function Notification(options) {\n\t        _classCallCheck(this, Notification);\n\t\n\t        this._el = document.createElement('div');\n\t        this._el.className = \"notification\";\n\t        this._el.innerHTML = options.text;\n\t        this._el.oncontextmenu = Notification.preventContextMenu;\n\t\n\t        if (options.additionalStyleClass) {\n\t            this._el.classList.add(options.additionalStyleClass);\n\t        }\n\t\n\t        var parent = options.place || document.body;\n\t        parent.appendChild(this._el);\n\t\n\t        this.positionAt(options);\n\t    }\n\t\n\t    _createClass(Notification, [{\n\t        key: 'positionAt',\n\t        value: function positionAt(options) {\n\t            if (options.top && options.left) {\n\t                this._el.style.top = options.top + 'px';\n\t                this._el.style.left = options.left + 'px';\n\t            } else {\n\t                var box = void 0;\n\t                var top = void 0;\n\t                var left = void 0;\n\t\n\t                if (options.anchor) {\n\t                    box = options.anchor.getBoundingClientRect();\n\t                } else {\n\t                    box = this._el.parentNode.getBoundingClientRect();\n\t                }\n\t\n\t                if (options.position) {\n\t                    switch (options.position) {\n\t                        case 'center':\n\t                            {\n\t                                top = box.top + box.height / 2 - this._el.offsetHeight / 2;\n\t                                left = box.left + box.width / 2 - this._el.offsetWidth / 2;\n\t                                break;\n\t                            }\n\t                    }\n\t                } else {\n\t                    top = box.top + TOP_OFFSET_FOR_NOTIFICATION;\n\t                    left = box.right - this._el.offsetWidth - RIGHT_OFFSET_FOR_NOTIFICATION;\n\t                }\n\t\n\t                this._el.style.top = top + 'px';\n\t                this._el.style.left = left + 'px';\n\t            }\n\t        }\n\t    }, {\n\t        key: 'show',\n\t        value: function show() {\n\t            this._el.classList.remove('js-hidden');\n\t        }\n\t    }, {\n\t        key: 'hide',\n\t        value: function hide() {\n\t            this._el.classList.add('js-hidden');\n\t        }\n\t    }, {\n\t        key: 'removeNotification',\n\t        value: function removeNotification() {\n\t            this._el.parentNode.removeChild(this._el);\n\t        }\n\t    }], [{\n\t        key: 'preventContextMenu',\n\t        value: function preventContextMenu(event) {\n\t            event.preventDefault();\n\t        }\n\t    }]);\n\t\n\t    return Notification;\n\t}();\n\n\texports.default = Notification;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** minesweeper.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 93483f4cef258dee9f2b\n **/","'use strict';\r\nimport Minesweeper from'./Game';\r\n\r\nnew Minesweeper({\r\n    element: document.getElementById('container')\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./Main.js\n **/","'use strict';\r\nimport Field from'./Field';\r\nimport Notification from './Notification';\r\n\r\nconst MAX_FIELD_HEIGHT = 16; // according to MS Windows\r\nconst MINES_CONFIGURATION = {\r\n    9: 10,\r\n    16: 40,\r\n    30: 99\r\n};\r\n\r\nfunction calculateNumberOfMines(size) {\r\n    return MINES_CONFIGURATION[size];\r\n}\r\n\r\nexport default class Minesweeper {\r\n    constructor(options) {\r\n        this._el = options.element;\r\n\r\n        this.startGame = this.startGame.bind(this);\r\n        this.finishGame = this.finishGame.bind(this);\r\n\r\n        this._levelSelector = this._el.querySelector('[data-selector=\"levelSelector\"]');\r\n        this._levelSelector.addEventListener('change', this.startGame);\r\n\r\n        this._refreshBtn = this._el.querySelector('[data-selector=\"refreshBtn\"]');\r\n        this._refreshBtn.addEventListener('click', this.startGame);\r\n\r\n        this._fieldPlace = this._el.querySelector('[data-component=\"fieldPlace\"]');\r\n        this._fieldPlace.addEventListener('endOfGame', this.finishGame);\r\n\r\n    }\r\n\r\n    static showEl(el) {\r\n        el.classList.remove('js-hidden');\r\n    }\r\n    static hideEl(el) {\r\n        el.classList.add('js-hidden');\r\n    }\r\n\r\n    get state() {\r\n        return this._state;\r\n    }\r\n\r\n    startGame() {\r\n        this._clear();\r\n\r\n        let level = parseInt(this._levelSelector.options[this._levelSelector.selectedIndex].value);\r\n\r\n        if (level) {\r\n            Minesweeper.showEl(this._refreshBtn);\r\n            Minesweeper.showEl(this._fieldPlace);\r\n\r\n            this._field = new Field({\r\n                element: this._fieldPlace,\r\n                width: level,\r\n                height: Math.min(level, MAX_FIELD_HEIGHT),\r\n                numberOfMines: calculateNumberOfMines(level)\r\n            });\r\n\r\n\r\n        } else {\r\n            Minesweeper.hideEl(this._fieldPlace);\r\n            Minesweeper.hideEl(this._refreshBtn);\r\n        }\r\n    }\r\n\r\n    finishGame(event) {\r\n        switch (event.detail.type) {\r\n\r\n            case 'gameOver': {\r\n                if (!this._gameOverNotification) {\r\n                    this._gameOverNotification = new Notification({\r\n                        text: 'Game Over!!!',\r\n                        place: this._el,\r\n                        anchor: this._el.querySelector('[data-selector=\"field\"]'),\r\n                        position: 'center',\r\n                        additionalStyleClass: 'gameOver'\r\n                    })\r\n                }\r\n                this._gameOverNotification.show();\r\n\r\n                this._gameOverNotification.positionAt({\r\n                    anchor: this._fieldPlace,\r\n                    position: 'center'\r\n                });\r\n                break;\r\n            }\r\n\r\n            case 'victory': {\r\n                if (!this._victoryNotification) {\r\n                    this._victoryNotification = new Notification({\r\n                        text: 'Victory!!!',\r\n                        place: this._el,\r\n                        anchor: this._fieldPlace,\r\n                        position: 'center',\r\n                        additionalStyleClass: 'victory'\r\n                    })\r\n                }\r\n                this._victoryNotification.show();\r\n\r\n                this._victoryNotification.positionAt({\r\n                    anchor: this._fieldPlace,\r\n                    position: 'center'\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    _clear() {\r\n        if(this._gameOverNotification) {\r\n            this._gameOverNotification.hide();\r\n        }\r\n\r\n        if(this._victoryNotification) {\r\n            this._victoryNotification.hide();\r\n        }\r\n\r\n        if(this._field) {\r\n            this._field.clear();\r\n            this._field = null;\r\n        }\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./Game.js\n **/","'use strict';\r\nimport * as polyfills from'./Polyfills';\r\npolyfills.installMatches(); //cross browser polyfill for 'matches' (does not supported by IE)\r\npolyfills.installClosest(); //cross browser polyfill for 'closest' (does not supported by IE)\r\npolyfills.installCustomEvent(); //cross browser polyfill for 'custom events' (does not supported by IE)\r\n\r\nexport default class Field{\r\n    constructor(options) {\r\n        this._el = options.element;\r\n        this._width = options.width;\r\n        this._height = options.height;\r\n        this._numberOfMines = options.numberOfMines;\r\n        this._flags = 0;\r\n\r\n        this._state = Field.PLAYING;\r\n\r\n        this._simultaneousClick = {\r\n            cell: null,\r\n            leftButtonDown: false,\r\n            rightButtonDown: false\r\n        };\r\n\r\n        this._renderField();\r\n        this._field = this._el.querySelector('[data-selector=\"field\"]');\r\n        this._minesLeft = this._el.querySelector('[data-selector=\"minesIndicator\"]');\r\n\r\n        this._placeMines();\r\n        this._placeNumbers();\r\n\r\n        this._openCell = this._openCell.bind(this);\r\n        this._field.addEventListener('click',this._openCell);\r\n\r\n        this._setFlag = this._setFlag.bind(this);\r\n        this._field.addEventListener('contextmenu',this._setFlag);\r\n\r\n        this._onMouseDown = this._onMouseDown.bind(this);\r\n        this._field.addEventListener('mousedown',this._onMouseDown);\r\n\r\n        this._onMouseUp = this._onMouseUp.bind(this);\r\n        this._field.addEventListener('mouseup',this._onMouseUp);\r\n    }\r\n//------------ static constants describing state of a game-------------\r\n    static get PLAYING() {\r\n        return 0;\r\n    }\r\n    static get END_OF_GAME() {\r\n        return 1;\r\n    }\r\n\r\n    //-----------get methods---------------\r\n    get width() {\r\n        return this._width;\r\n    }\r\n    get height() {\r\n        return this._height;\r\n    }\r\n    get numberOfMines() {\r\n        return this._numberOfMines;\r\n    }\r\n    get flags() {\r\n        return this._flags;\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n\r\n//----------------public methods--------------------\r\n    clear() {\r\n        this._el.removeChild(this._field);\r\n        this._field = null;\r\n    }\r\n    cellNeighbours(y,x) {\r\n        let neighbours = [];\r\n\r\n        for (let i = Math.max(y-1, 0); i <= Math.min(y+1, this.height-1); i++) {\r\n            for (let j = Math.max(x-1, 0); j <= Math.min(x+1, this.width-1); j++) {\r\n                if ( !(i === y && j === x) ) {\r\n                    neighbours.push(this._field.rows[i].cells[j]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return neighbours;\r\n    }\r\n\r\n    //-----------------event handlers----------------\r\n    _openCell(event) {\r\n        let td = event.target.closest('td');\r\n\r\n        if (this.state === Field.END_OF_GAME || !td ||\r\n            td.dataset.type !== 'covered') {\r\n            return;\r\n        }\r\n\r\n        let y = td.parentNode.rowIndex;\r\n        let x = td.cellIndex;\r\n\r\n        if ( Field._isAnyMineHere(td) ) {\r\n            this._endOfGame('gameOver');\r\n\r\n        } else {\r\n            td.dataset.type = 'opened';\r\n            Field._showOpenedCell(td);\r\n\r\n            if (td.dataset.info ==='') {\r\n                this._openEmptyFieldAroundCell(y,x);\r\n            }\r\n\r\n            if ( this._doesPlayerWin() ) {\r\n                this._endOfGame('victory');\r\n            }\r\n        }\r\n    }\r\n\r\n    _setFlag(event) {\r\n        event.preventDefault();\r\n\r\n        let td = event.target.closest('td');\r\n\r\n        if (this.state === Field.END_OF_GAME || !td) {\r\n            return;\r\n        }\r\n\r\n        let tdType = td.dataset.type;\r\n\r\n        switch (tdType) {\r\n            case 'covered': {\r\n                td.dataset.type = 'marked';\r\n                this._flags++;\r\n                break;\r\n            }\r\n            case 'marked': {\r\n                td.dataset.type = 'covered';\r\n                this._flags--;\r\n                break;\r\n            }\r\n            default: {\r\n                return;\r\n            }\r\n        }\r\n\r\n        Field._toggleFlag(td);\r\n        this._showMinesLeft();\r\n    }\r\n\r\n    _onMouseDown(event) {\r\n        event.preventDefault();\r\n\r\n        let td = event.target.closest('td');\r\n\r\n        if (this.state === Field.END_OF_GAME || !td) {\r\n            return;\r\n        }\r\n\r\n        switch (event.which) {\r\n            case 1: {\r\n                this._simultaneousClick.leftButtonDown = true;\r\n                break;\r\n            }\r\n            case 3: {\r\n                this._simultaneousClick.rightButtonDown = true;\r\n                break;\r\n            }\r\n            default: {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this._simultaneousClick.cell) {\r\n            let sameCell = (this._simultaneousClick.cell === td);\r\n            let leftButtonDown = this._simultaneousClick.leftButtonDown;\r\n            let rightButtonDown = this._simultaneousClick.rightButtonDown;\r\n\r\n            if (sameCell && leftButtonDown && rightButtonDown) {\r\n                this._openNeighbours(td);\r\n            } else {\r\n                this._simultaneousClick.leftButtonDown = false;\r\n                this._simultaneousClick.rightButtonDown = false;\r\n                this._simultaneousClick.cell = null;\r\n            }\r\n        } else {\r\n            this._simultaneousClick.cell = td;\r\n        }\r\n    }\r\n\r\n    _onMouseUp(event) {\r\n        event.preventDefault();\r\n\r\n        switch (event.which) {\r\n            case 1:{\r\n                this._simultaneousClick.leftButtonDown = false;\r\n                break;\r\n            }\r\n            case 3:{\r\n                this._simultaneousClick.rightButtonDown = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        this._deselectCells();\r\n\r\n        this._simultaneousClick.cell = null;\r\n    }\r\n\r\n    //--------------main private methods-----------\r\n    _renderField() {\r\n        let fieldHtml = '<table data-selector=\"field\">';\r\n\r\n        for(let i = 0; i<this.height; i++) {\r\n            fieldHtml +='<tr>\\n';\r\n            for (let j = 0; j<this.width; j++) {\r\n                fieldHtml+='<td class=\"covered\" data-type=\"covered\"></td>\\n';\r\n            }\r\n            fieldHtml +='</tr>';\r\n        }\r\n\r\n        fieldHtml += '</table>';\r\n\r\n        this._el.insertAdjacentHTML('beforeEnd',fieldHtml);\r\n    }\r\n\r\n    _placeMines() {\r\n        for(let i = 1; i<=this.numberOfMines;) {\r\n            let y = Math.round( Math.random()*(this.height - 1) );\r\n            let x = Math.round( Math.random()*(this.width - 1) );\r\n            let td = this._field.rows[y].cells[x];\r\n\r\n            if ( !Field._isAnyMineHere(td) ) {\r\n                td.dataset.info = 'M';\r\n                i++;\r\n            }\r\n        }\r\n\r\n        this._showMinesLeft();\r\n    }\r\n\r\n    _placeNumbers() {\r\n        for(let i = 0; i<this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let td = this._field.rows[i].cells[j];\r\n                if ( !Field._isAnyMineHere(td) ) {\r\n                    let count = Field._mineCounter( this.cellNeighbours(i,j) );\r\n                    td.dataset.info = count || '';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _endOfGame(typeOfEnd) {\r\n        this._state = Field.END_OF_GAME;\r\n\r\n        if (typeOfEnd === 'gameOver') {\r\n            this._showMines();\r\n        }\r\n\r\n\r\n        let event = new CustomEvent(\"endOfGame\", {\r\n            detail: {type: typeOfEnd}\r\n        });\r\n\r\n        this._el.dispatchEvent(event);\r\n    }\r\n\r\n//------------------ different subordinate private methods---------------\r\n\r\n    static _isAnyMineHere(cell) {\r\n        return ( cell.dataset.info ==='M' );\r\n    }\r\n\r\n    static _mineCounter(cells) {\r\n        return cells.reduce( (count, cell)=> {\r\n            if ( Field._isAnyMineHere(cell) ) {\r\n                count++;\r\n            }\r\n\r\n            return count;\r\n        },0);\r\n    }\r\n\r\n    static _flagCounter(cells) {\r\n        return cells.reduce( (count, cell)=> {\r\n            if ( cell.dataset.type === 'marked' ) {\r\n                count++;\r\n            }\r\n\r\n            return count;\r\n        },0);\r\n    }\r\n\r\n    _openNeighbours(cell) {\r\n        if (!cell.innerHTML) {\r\n            return;\r\n        }\r\n        let y = cell.parentNode.rowIndex;\r\n        let x = cell.cellIndex;\r\n\r\n        let neighbours = this.cellNeighbours(y,x);\r\n\r\n        Field._selectCells(neighbours);\r\n\r\n        let countFlagsAroundCell = Field._flagCounter(neighbours);\r\n\r\n        if (parseInt(cell.dataset.info) === countFlagsAroundCell) {\r\n            neighbours.forEach((td)=>{\r\n                let event = {\r\n                    target: td\r\n                };\r\n                this._openCell(event);\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    _openEmptyFieldAroundCell(y,x) {\r\n        this.cellNeighbours(y, x).forEach((td)=>{\r\n            let isMine = Field._isAnyMineHere(td);\r\n            let isOpened = (td.dataset.type ==='opened');\r\n\r\n            if ( !(isMine || isOpened) ) {\r\n                let event = {\r\n                    target: td\r\n                };\r\n                this._openCell(event);\r\n            }\r\n        })\r\n    }\r\n\r\n    _doesPlayerWin() {\r\n        let victory = true;\r\n\r\n        for(let i = 0; i<this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let td = this._field.rows[i].cells[j];\r\n\r\n                let isMine = Field._isAnyMineHere(td);\r\n                let isClosed = (td.dataset.type ==='covered' || td.dataset.type ==='marked');\r\n                if (isClosed && !isMine) {\r\n                    victory = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return victory;\r\n    }\r\n\r\n//---------different non-logical private methods changing styles-------------\r\n    static _showOpenedCell(cell) {\r\n        cell.classList.remove('covered');\r\n        cell.innerHTML = cell.dataset.info;\r\n    }\r\n\r\n    static _toggleFlag(cell) {\r\n        cell.classList.toggle('marked');\r\n    }\r\n\r\n    static _selectCells(cells) {\r\n        cells.filter(td => td.dataset.type === 'covered')\r\n            .forEach(td => td.classList.add('selected'));\r\n    }\r\n\r\n    _deselectCells () {\r\n        let selectedCells = this._field.querySelectorAll('.selected');\r\n\r\n        [].forEach.call(selectedCells,(td)=>{\r\n            td.classList.remove('selected');\r\n        });\r\n    }\r\n\r\n    _showMines() {\r\n        for(let i = 0; i<this.height; i++) {\r\n            for (let j = 0; j < this.width; j++) {\r\n                let td =  this._field.rows[i].cells[j];\r\n\r\n                if (Field._isAnyMineHere(td)) {\r\n                    td.classList.remove('covered');\r\n                    td.classList.add('exploded');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _showMinesLeft() {\r\n        this._minesLeft.innerHTML = this.numberOfMines - this.flags;\r\n    }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./Field.js\n **/","'use strict';\r\nexport function installMatches() {\r\n\r\n    // проверяем поддержку\r\n    if (!Element.prototype.matches) {\r\n\r\n        // определяем свойство\r\n        Element.prototype.matches = Element.prototype.matchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function installClosest() {\r\n\r\n    // проверяем поддержку\r\n    if (!Element.prototype.closest) {\r\n\r\n        // реализуем\r\n        Element.prototype.closest = function(css) {\r\n            var node = this;\r\n\r\n            while (node) {\r\n                if (node.matches(css)) return node;\r\n                else node = node.parentElement;\r\n            }\r\n            return null;\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport function installCustomEvent() {\r\n    try {\r\n        new CustomEvent(\"IE has CustomEvent, but doesn't support constructor\");\r\n    } catch (e) {\r\n\r\n        window.CustomEvent = function(event, params) {\r\n            var evt;\r\n            params = params || {\r\n                bubbles: false,\r\n                cancelable: false,\r\n                detail: undefined\r\n            };\r\n            evt = document.createEvent(\"CustomEvent\");\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n            return evt;\r\n        };\r\n\r\n        CustomEvent.prototype = Object.create(window.Event.prototype);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./Polyfills.js\n **/","'use strict';\r\nconst TOP_OFFSET_FOR_NOTIFICATION = 10;\r\nconst RIGHT_OFFSET_FOR_NOTIFICATION = 10;\r\n\r\nexport default class Notification {\r\n    constructor(options) {\r\n        this._el = document.createElement('div');\r\n        this._el.className = \"notification\";\r\n        this._el.innerHTML = options.text;\r\n        this._el.oncontextmenu = Notification.preventContextMenu;\r\n\r\n        if (options.additionalStyleClass) {\r\n            this._el.classList.add(options.additionalStyleClass);\r\n        }\r\n\r\n        let parent = options.place || document.body;\r\n        parent.appendChild(this._el);\r\n\r\n        this.positionAt(options);\r\n    }\r\n\r\n    static preventContextMenu(event) {\r\n        event.preventDefault();\r\n    }\r\n\r\n    positionAt(options) {\r\n        if (options.top && options.left) {\r\n            this._el.style.top = options.top + 'px';\r\n            this._el.style.left = options.left + 'px';\r\n        } else {\r\n            let box;\r\n            let top;\r\n            let left;\r\n\r\n            if (options.anchor) {\r\n                box = options.anchor.getBoundingClientRect();\r\n            } else {\r\n                box = this._el.parentNode.getBoundingClientRect();\r\n            }\r\n\r\n            if (options.position) {\r\n                switch (options.position) {\r\n                    case 'center': {\r\n                        top = box.top + box.height / 2 - this._el.offsetHeight / 2;\r\n                        left = box.left + box.width / 2 - this._el.offsetWidth / 2;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                top = box.top + TOP_OFFSET_FOR_NOTIFICATION;\r\n                left = box.right - this._el.offsetWidth - RIGHT_OFFSET_FOR_NOTIFICATION;\r\n            }\r\n\r\n            this._el.style.top = top + 'px';\r\n            this._el.style.left = left + 'px';\r\n        }\r\n    }\r\n\r\n    show() {\r\n        this._el.classList.remove('js-hidden');\r\n    }\r\n\r\n    hide() {\r\n        this._el.classList.add('js-hidden');\r\n    }\r\n\r\n    removeNotification() {\r\n        this._el.parentNode.removeChild(this._el);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./Notification.js\n **/"],"sourceRoot":""}